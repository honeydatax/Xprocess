' Gambas class file

Public Sub _new()

End

Public Sub Form_Open()

End

Public Sub Timer1_Timer()
Dim f1 As File
Dim v As String
Timer1.Stop
ListBox1.Clear()
f1 = Open "/home/pi/out" For Input
Line Input #f1, v
Do While Not Eof(f1)
 Line Input #f1, v
 ListBox1.Add(v) 
Loop
Timer1.Stop
Form.Refresh()
End

Public Sub Button1_Click()

  Shell "ps -ax > /home/pi/out"
  Timer1.Start
End

Public Sub ListBox1_Click()
Dim ii As Integer
Dim i As Integer
Dim h As String
  i = Message("delete process?" & ListBox1.Text, "yes")
  If i = 1 Then
    h = Trim(listBox1.Text)
    ii = InStr(h, " ")
    h = Trim(h)
    If ii > 0 Then h = Mid(h, 1, ii)
    Shell "kill " & h 
  Endif

End
